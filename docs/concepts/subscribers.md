<div align="center">
    <img alt="Contexted Logo" width="64" src="https://raw.githubusercontent.com/contexted-js/brand/master/dark/main-fill.svg">
    <h1>
		<a href="https://github.com/contexted-js/core">
        	@Contexted/Core
    	</a>
		<span>Documentations</span>
	</h1>
</div>

<img alt="GitHub package.json version" src="https://img.shields.io/github/package-json/v/contexted-js/core">

---

[**Documentation**](../README.md) > [**Concepts**](README.md) > **Subscribers**

---

## Explain

### Subscribers

When it comes to registering a [route](routes.md), passing a **test case**, and triggering the [middlewares](middlewares.md), you can think of unlimited strategies, From using different methods to writing in different programming languages. A **subscriber** is a function that registers a callback function (which will be generated by **Contexted**) to a **test case**, returns an **unsubscriber** for that **route**, and helps you to trigger **Contexted** with any strategy you want:

```ts
import type { PromiseOrValue, Transformer } from '@contexted/core';

export type Unsubscriber = () => PromiseOrValue<void>;

export type Subscriber<Test, Request, Response> = (
	test: Test,
	callback: Transformer<Request, Response>
) => PromiseOrValue<Unsubscriber>;
```

## Examples

This subscriber will subscribe routes to a very simple event emitter:

```ts
import type { Transformer, Subscriber } from '@contexted/core';

import type { Request, Response } form 'your-code';

type Test = string;

const routes: { [route: string]: Transformer<Request, Response> } = {};

const subscriberFunction: Subscriber<Test, Request, Response> = () => {
	if (routes[test]) return null;

	routes[test] = handler;

	return () => delete routes[test];
};

async function emit(route: Route, data?: Request): Promise<Response> {
	for (const [test, handler] of Object.entries(routes))
		if (route === test) return await handler(data);
}
```

---

< Prev Page
[Traverser](traverser.md)

Next Page >
[Usage](../usage/README.md)
